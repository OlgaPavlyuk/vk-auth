(this["webpackJsonpvk-auth"]=this["webpackJsonpvk-auth"]||[]).push([[0],[,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(32)},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(6),i=n.n(c),o=n(5),s=n(3),u=n(1),l=window.VK;function m(e){return function(t){t({type:"USER_REQUEST"}),l.Api.call("users.get",{users_id:e,fields:"photo_max, counters",v:"5.103"},(function(e){if(e.response){var n=e.response[0],r={id:n.id,firstName:n.first_name,lastName:n.last_name,photo:n.photo_max,friendsCount:n.counters.friends};t({type:"USER_SUCCESS",payload:r})}else t({type:"LOGIN_FAIL",payload:new Error(e.error.error_msg)})}))}}var f={isLogin:!1,user:{},error:"",isLoading:!0};var E={friends:[],count:0,isSearch:!1,isFetching:!1,error:""};var h=Object(s.c)({login:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REQUEST":case"LOGIN_REQUEST":return Object(u.a)({},e,{isLoading:!0,isLogin:!1,error:""});case"LOGIN_FAIL":return Object(u.a)({},e,{isLoading:!1,isLogin:!1,error:t.payload.message});case"CREAR_LOGIN":case"LOGOUT":return Object(u.a)({},e,{isLoading:!1,isLogin:!1,error:"",user:{}});case"USER_SUCCESS":return Object(u.a)({},e,{isLoading:!1,isLogin:!0,error:"",user:t.payload});default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CLEAR_SEARCH":return Object(u.a)({},e,{isFetching:!1,isSearch:!1,count:0,friends:[],error:""});case"SEARCH_REQUEST":return Object(u.a)({},e,{isFetching:!0,count:0,friends:[],error:""});case"SEARCH_SUCCESS":return Object(u.a)({},e,{friends:t.payload.items,count:t.payload.count,isSearch:!0,isFetching:!1});case"SEARCH_FAIL":return Object(u.a)({},e,{isFetching:!1,count:0,friends:[],isSearch:!1,error:t.payload.message});default:return e}}}),d=n(13),g=n(14),_=n.n(g),p=Object(s.d)(h,Object(s.a)(d.a,_.a)),C=(n(25),n(26),function(){return a.a.createElement("div",{className:"loader"},"Loading...")}),v=(n(27),function(e){return a.a.createElement("div",{className:"error"},a.a.createElement("div",{className:"error__text"},e.text),a.a.createElement("button",{className:"error__close",onClick:e.onClose}))}),L=(n(28),function(e){return a.a.createElement("div",{className:"auth"},a.a.createElement("h1",{className:"auth__title"},"Authorization"),a.a.createElement("button",{className:"btn auth__btn login",onClick:e.onClick},"Login"))}),S=(n(29),function(e){var t=e.width,n=e.height;return a.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 612 612",fill:"none",width:t,height:n},a.a.createElement("path",{d:"M306 328.667c90.759 0 164.333-73.575 164.333-164.333S396.759 0 306 0 141.667 73.575 141.667 164.333 215.241 328.667 306 328.667zm77.878-99.291c-7.475 24.718-39.498 43.298-77.878 43.298s-70.403-18.581-77.878-43.298h155.756zm199.789 269.291v54.169c0 8.029-5.912 17.359-13.246 20.624C541.993 586.109 464.45 612 306 612c-158.451 0-235.992-25.891-264.42-38.54-7.335-3.265-13.246-12.595-13.246-20.624v-54.169c0-81.174 61.804-148.515 140.666-157.533 2.396-.275 5.949.751 7.903 2.165 36.361 26.324 80.877 42.035 129.097 42.035s92.738-15.711 129.097-42.035c1.955-1.414 5.508-2.44 7.904-2.165 78.861 9.018 140.666 76.359 140.666 157.533z"}))}),N=function(e){var t=e.firstName,n=e.lastName,r=e.photo,c=e.friendsCount,i=e.error,o=e.onLogout;return i?a.a.createElement(v,{text:i}):a.a.createElement("div",{className:"user"},a.a.createElement("h1",{className:"user__name"},t," ",n),a.a.createElement("div",{className:"user__info"},a.a.createElement("span",{className:"user__friends-count"},a.a.createElement(S,{width:"2rem",height:"2rem"}),c),a.a.createElement("button",{className:"btn logout",onClick:o},"Log out")),a.a.createElement("img",{src:r,alt:"".concat(t," ").concat(n),className:"user__photo"}))},b=n(15),R=(n(30),function(e){var t=e.width,n=e.height;return a.a.createElement("svg",{width:t,height:n,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("path",{d:"M21.0539 20.0462C21.3321 20.3245 21.3321 20.7756 21.0539 21.0539C20.7756 21.3321 20.3245 21.3321 20.0462 21.0539L16.6262 17.6339C16.348 17.3556 16.348 16.9045 16.6262 16.6262C16.9045 16.348 17.3556 16.348 17.6339 16.6262L21.0539 20.0462ZM10.29 17.8425C6.11892 17.8425 2.73755 14.4612 2.73755 10.29C2.73755 6.11892 6.11892 2.73755 10.29 2.73755C14.4612 2.73755 17.8425 6.11892 17.8425 10.29C17.8425 14.4612 14.4612 17.8425 10.29 17.8425ZM10.29 16.4175C13.6742 16.4175 16.4175 13.6742 16.4175 10.29C16.4175 6.90592 13.6742 4.16255 10.29 4.16255C6.90592 4.16255 4.16255 6.90592 4.16255 10.29C4.16255 13.6742 6.90592 16.4175 10.29 16.4175ZM6.77505 9.72005C6.77505 9.98238 6.56238 10.195 6.30005 10.195C6.03771 10.195 5.82505 9.98238 5.82505 9.72005C5.82505 7.5689 7.5689 5.82505 9.72005 5.82505C9.98238 5.82505 10.195 6.03771 10.195 6.30005C10.195 6.56238 9.98238 6.77505 9.72005 6.77505C8.09357 6.77505 6.77505 8.09357 6.77505 9.72005Z"}))}),w=function(e){return a.a.createElement("div",{className:"search"},a.a.createElement("form",{className:"search__form search-form",onSubmit:e.onSubmit},a.a.createElement("div",{className:"search-form__input-wrapper"},a.a.createElement("input",{type:"text",className:"search-form__input",onChange:e.onInput,value:e.value,placeholder:"friends searching"}),a.a.createElement("span",{className:"search-form__icon"},a.a.createElement(R,{width:"1.5rem",height:"1.5rem"}))),a.a.createElement("button",{className:"btn search-form__btn"},"Search")))},y=(n(31),function(e){var t=e.error,n=e.isFetching,r=e.friends,c=e.count;if(n)return a.a.createElement(C,null);if(t)return a.a.createElement(v,{text:t});if(c<1)return a.a.createElement("h3",{className:"friends__title"},"No friends found");var i=c>1?"friends":"friend";return a.a.createElement(a.a.Fragment,null,a.a.createElement("h3",{className:"friends__title"},c," ",i," found:"),a.a.createElement("ul",{className:"friends"},r.map((function(e){var t=e.id,n=e.first_name,r=e.last_name;return a.a.createElement("li",{key:t,className:"friends__item"},n," ",r)}))))}),O=Object(o.b)((function(e){return{search:e.search}}),(function(e){return{getFriends:function(t){return e(function(e){if(""===e)return function(e){e({type:"CLEAR_SEARCH"})};var t=window.VK;return function(n){""===e&&n({type:"CLEAR_SEARCH"}),n({type:"SEARCH_REQUEST"}),t.Api.call("friends.search",{q:e,v:"5.103"},(function(e){if(e.response){var t=e.response,r=t.items,a=t.count;n({type:"SEARCH_SUCCESS",payload:{items:r,count:a}})}else n({type:"SEARCH_FAIL",error:!0,payload:new Error("Search error")})}))}}(t))},clearSearch:function(){return e((function(e){e({type:"CLEAR_SEARCH"})}))}}}))((function(e){var t=Object(r.useState)(""),n=Object(b.a)(t,2),c=n[0],i=n[1],o=e.search,s=e.getFriends,u=e.clearSearch;return a.a.createElement(a.a.Fragment,null,a.a.createElement(w,{onSubmit:function(e){e.preventDefault(),s(c)},value:c,onInput:function(e){var t=e.target;t.value||u(),i(t.value)}}),o.isSearch&&a.a.createElement(y,o))})),A=Object(o.b)((function(e){return{login:e.login}}),(function(e){return{handleLogin:function(){return e((function(e){e({type:"LOGIN_REQUEST"}),l.Auth.login((function(t){if(t.session){var n=t.session.user.id;e(m(n))}else e({type:"LOGIN_FAIL",payload:new Error("Authorization canceled")})}),2)}))},handleLogout:function(){return e((function(e){l.Auth.logout((function(){e({type:"LOGOUT"})}))}))},checkLogin:function(){return e((function(e){e({type:"LOGIN_REQUEST"}),l.Auth.getLoginStatus((function(t){if(t.session){var n=t.session.mid;e(m(n))}else e({type:"CREAR_LOGIN"})}))}))},clearLogin:function(){return e({type:"CREAR_LOGIN"})}}}))((function(e){var t=e.login,n=e.handleLogin,c=e.handleLogout,i=e.checkLogin,o=e.clearLogin,s=t.isLoading,u=t.error,l=t.user;Object(r.useEffect)((function(){if(!window.VK)return a.a.createElement("div",null,"VK error");i()}),[i]);return a.a.createElement("div",{className:"container"},s?a.a.createElement(C,null):u?a.a.createElement(v,{text:u,onClose:o}):t.isLogin?a.a.createElement(a.a.Fragment,null,a.a.createElement(N,Object.assign({},l,{onLogout:c})),a.a.createElement(O,null)):a.a.createElement(L,{onClick:n}))}));i.a.render(a.a.createElement(o.a,{store:p},a.a.createElement(A,null)),document.getElementById("root"))}],[[16,1,2]]]);
//# sourceMappingURL=main.2f9573be.chunk.js.map